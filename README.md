

    Explore
    Gist
    Blog
    Help

    Serge-Harnyk

    1
    0
    0

public Serge-Harnyk/hc-nettyapp

hc-nettyapp /

or cancel

20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
- скриншоты как выглядят станицы /status в рабочем приложении
- скриншот результата выполнения команды ab –c 100 –n 10000 “http://somedomain/status"
 
Комментарии
 - использовать самую последнюю стабильную версию нетти.
 - обратить внимание на многопоточность
 - разобраться в EventLoop’ами нетти
Инструкция
===========
Для установки приложения необходимы:
1. Java 1.6
2. MySQL 5.1.6
3. Maven
Перед запуском приложения, необходимо выполнить MySQL-запрос находящийся в файле /db/dump.sql
Ссылку на базу, логин и пароль пользователя необходимо указать в файле db.properties.
Сам сервер можно запустить в консоли из папки /mavenapp, введя команду mvn exec:java -Dexec.mainClass="core.HttpServer".
Так же команда mvn compile assembly:single создаст единый jar-архив.
Приложение использует порт 8082, например http://localhost:8082/status
Особенности имплементации
===========
Запись данных о запросах происходит с помощью класса JbdcLoggingHandler.
Базовый парсинг URL - в классе ControllerFactory, который возвращает объект контроллера в зависимости от запроса.
Специфическая логика обработки запросов реализована в отдельных контроллерах.
Для рендеринга страницы статуса используется класс StatusPage, являющийся аналогом вьюхи в MVC. 
Данные во "вьюху" передаются с помощью объекта-комманды StatusCommand.
Примечания
===========
При разработке приложения использовался Java-фреймворк Netty, как каркас реализующий drive-event архитектуру сервера. 
Работу с БД обеспечивала библиотека JDBC.
При запросе к серверу с локалхоста с операционной системой Ubuntu, приложение записывает IP как IPv6, в тоже время при запросах в браузере с удаленных клиентов, а так же при использовании утилиты
ab записывает как IPv4.
Под скоростью в статистике понимается сумма переданных и принятых байт поделенная на время выполнения запроса.

